{% extends "base.html" %}{% block content %}<div class="card"><form class="grid three" method="get"><select name="sort"><option value="due_asc" {{ 'selected' if sort=='due_asc' else '' }}>마감일↑</option><option value="due_desc" {{ 'selected' if sort=='due_desc' else '' }}>마감일↓</option><option value="created_desc" {{ 'selected' if sort=='created_desc' else '' }}>등록일 최신</option><option value="created_asc" {{ 'selected' if sort=='created_asc' else '' }}>등록일 오래된</option><option value="category" {{ 'selected' if sort=='category' else '' }}>카테고리</option></select><select name="when"><option value="">전체</option><option value="today" {{ 'selected' if when=='today' else '' }}>오늘 마감</option><option value="tomorrow" {{ 'selected' if when=='tomorrow' else '' }}>내일 마감</option><option value="upcoming" {{ 'selected' if when=='upcoming' else '' }}>오늘 이후</option></select><button class="btn">적용</button></form></div><div class="grid">{% for t in tasks %}<div class="task {% if t.completed %}done{% endif %}" style="border-left-color: {{ t.color }};"><input type="checkbox" {% if t.completed %}checked{% endif %} onclick="toggleComplete({{ t.id }})"><div style="flex:1"><div><strong>{{ t.title }}</strong></div><div class="meta">마감 {{ t.due_date }} · 등록 {{ (t.created_at or t.due_date).strftime('%Y-%m-%d') }} · {{ t.category }}</div>{% if t.attachment_path %}<div class="meta"><a href="{{ url_for('static', filename=t.attachment_path) }}" target="_blank">첨부파일</a></div>{% endif %}</div>{% if is_admin %}<form method="post" action="{{ url_for('delete_task', task_id=t.id) }}"><button class="btn danger">삭제</button></form>{% endif %}</div>{% else %}<div class="card">내용 없음</div>{% endfor %}</div>{% if is_admin %}<div class="card"><h3>추가</h3><form class="grid two" method="post" action="{{ url_for('add_task') }}" enctype="multipart/form-data"><input name="title" placeholder="제목" required><input type="date" name="due_date" required><select name="category"><option value="assessment">수행평가</option><option value="assignment">과제</option></select><input name="color" type="color" value="#60a5fa"><input type="file" name="attachment"><button class="btn primary">등록</button></form></div>{% endif %}{% endblock %}