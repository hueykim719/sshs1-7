{% extends "base.html" %}
{% block content %}
<h1>ìˆ˜í–‰í‰ê°€ / ê³¼ì œ</h1>
<a class="btn" href="{{ url_for('index') }}">â† ë’¤ë¡œ</a>
<div class="section">
  <h2>ğŸ“Œ ìˆ˜í–‰í‰ê°€</h2>
  {% if assessments %}
    <ul class="list">
      {% for t in assessments %}
        <li class="list-item">
          <span class="title">{{ t.title }}</span>
          <span class="date">{{ t.due_date.strftime('%Y-%m-%d') }}</span>
          {% if is_admin %}
          <form method="post" action="{{ url_for('delete_task', task_id=t.id) }}">
            <button class="btn small danger">ì‚­ì œ</button>
          </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="empty">ë“±ë¡ëœ ìˆ˜í–‰í‰ê°€ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
  {% endif %}
</div>

<div class="section">
  <h2>ğŸ“ ê³¼ì œ</h2>
  {% if assignments %}
    <ul class="list">
      {% for t in assignments %}
        <li class="list-item">
          <span class="title">{{ t.title }}</span>
          <span class="date">{{ t.due_date.strftime('%Y-%m-%d') }}</span>
          {% if is_admin %}
          <form method="post" action="{{ url_for('delete_task', task_id=t.id) }}">
            <button class="btn small danger">ì‚­ì œ</button>
          </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="empty">ë“±ë¡ëœ ê³¼ì œê°€ ì—†ìŠµë‹ˆë‹¤.</div>
  {% endif %}
</div>

{% if is_admin %}
<div class="section">
  <h2>â• ì¶”ê°€í•˜ê¸°</h2>
  <form class="form row wrap" method="post" action="{{ url_for('add_task') }}">
    <input class="input" type="text" name="title" placeholder="ì œëª©" required>
    <input class="input" type="datetime-local" id="due_date" name="due_date" required>

<script>
  const dateInput = document.getElementById('due_date');
  const today = new Date();
  const month = String(today.getMonth() + 1).padStart(2, '0');
  const day = String(today.getDate()).padStart(2, '0');
  const hours = String(today.getHours()).padStart(2, '0');
  const minutes = String(today.getMinutes()).padStart(2, '0');

  // ê¸°ë³¸ê°’ì„ "2025-ì›”-ì¼Tì‹œ:ë¶„"ìœ¼ë¡œ ì„¤ì •
  dateInput.value = `2025-${month}-${day}T${hours}:${minutes}`;
  
  // ì„ íƒ ê°€ëŠ¥í•œ ë‚ ì§œë¥¼ 2025ë…„ìœ¼ë¡œ ì œí•œ
  dateInput.min = "2025-01-01T00:00";
  dateInput.max = "2025-12-31T23:59";
</script>
    <select class="input" name="category">
      <option value="assessment">ìˆ˜í–‰í‰ê°€</option>
      <option value="assignment" selected>ê³¼ì œ</option>
    </select>
    <button class="btn primary">ì¶”ê°€</button>
  </form>
</div>
{% endif %}

{% endblock %}
